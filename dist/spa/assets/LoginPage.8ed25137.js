import{B as P,i as Q,G as d,c as b,h as S,E as L,g as F,J as q,a6 as I,_ as V,bv as k,r as w,l as $,x as B,n as s,d as t,aC as z,z as U,M as H,aD as h,bw as j,aI as C,q as g,A,aF as G,aG as K}from"./index.741a3cbc.js";import{Q as M}from"./QForm.972f20fc.js";import{Q as N,a as W}from"./QLayout.fe49d1b3.js";import{u as D}from"./use-quasar.088138f3.js";import{Q as E}from"./QSpinnerFacebook.f49bcbaa.js";import{u as J}from"./axios.851d6ad1.js";import"./QScrollObserver.5b685606.js";import"./QResizeObserver.a9dbfe29.js";var O=P({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(l,{slots:m}){const{proxy:{$q:r}}=F(),a=Q(q,d);if(a===d)return console.error("QPage needs to be a deep child of QLayout"),d;if(Q(I,d)===d)return console.error("QPage needs to be child of QPageContainer"),d;const u=b(()=>{const i=(a.header.space===!0?a.header.size:0)+(a.footer.space===!0?a.footer.size:0);if(typeof l.styleFn=="function"){const _=a.isContainer.value===!0?a.containerHeight.value:r.screen.height;return l.styleFn(i,_)}return{minHeight:a.isContainer.value===!0?a.containerHeight.value-i+"px":r.screen.height===0?i!==0?`calc(100vh - ${i}px)`:"100vh":r.screen.height-i+"px"}}),f=b(()=>`q-page${l.padding===!0?" q-layout-padding":""}`);return()=>S("main",{class:f.value,style:u.value},L(m.default))}});const x=l=>(G("data-v-de9c7018"),l=l(),K(),l),T=x(()=>g("img",{src:"company_logo_V2.png",alt:""},null,-1)),X=x(()=>g("div",{class:"text-center q-pt-lg"},[g("div",{class:"col text-h6 ellipsis"},"Log in")],-1)),Y={class:"row justify-center"},Z={__name:"LoginPage",setup(l){const m=k(),r=J(),a=w(""),p=w(""),u=D(),f=()=>{u.loading.show({spinner:E,spinnerColor:"light-blue",messageColor:"white",backgroundColor:"light-blue",message:""})},i=()=>{u.loading.hide()},_=()=>{f();let y={email:a.value,password:p.value,accessed_from:"web"};r.userLoginWithPassword(y).then(n=>{let e=n.data.token;r.token=e,localStorage.setItem("token",e),r.getUserInfo(),m.push({name:"main"})}).catch(n=>{var v;let e=null,c=null,o=(v=n.response)==null?void 0:v.data;o!=null&&o.non_field_errors?(e=o.non_field_errors,c=e[0]):o!=null&&o.email?(e=o.email,c=e[0]):o||(c="Something went Wrong. Please contact your admin!!!"),c&&u.notify({message:c,type:"negative",position:"top"})}).finally(()=>{i()})};return(y,n)=>($(),B(N,null,{default:s(()=>[t(W,null,{default:s(()=>[t(O,{class:"flex bg-image flex-center"},{default:s(()=>[t(z,{style:U(H(u).screen.lt.sm?{width:"80%"}:{width:"30%"})},{default:s(()=>[t(h,null,{default:s(()=>[t(j,{size:"103px",class:"absolute-center shadow-10"},{default:s(()=>[T]),_:1})]),_:1}),t(h,null,{default:s(()=>[X]),_:1}),t(h,null,{default:s(()=>[t(M,{class:"q-gutter-md",onSubmit:_},{default:s(()=>[t(C,{autofocus:"",outlined:"",modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),"bg-color":"grey-3",label:"email",type:"email",rules:[e=>!!e||"Field is required"],"no-error-icon":""},null,8,["modelValue","rules"]),t(C,{type:"password",outlined:"",modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=e=>p.value=e),"bg-color":"grey-3",label:"Password",rules:[e=>!!e||"Field is required"],"no-error-icon":""},null,8,["modelValue","rules"]),g("div",Y,[t(A,{label:"Login",type:"submit",color:"primary"})])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1}))}};var re=V(Z,[["__scopeId","data-v-de9c7018"]]);export{re as default};
