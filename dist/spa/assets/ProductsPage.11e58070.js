import{r as w,c as p,g as ge,an as he,Z as ve,ai as we,h as z,B as xe,aJ as Se,b1 as Ve,aK as Ne,aM as Fe,b2 as qe,bu as De,b3 as me,bg as Ie,aL as ke,am as $e,_ as H,L as ee,w as je,l as E,x as A,n as m,d as a,aD as j,A as Q,aI as O,M as $,bj as te,aC as oe,b as ae,bk as le,b7 as ue,aF as re,aG as se,q as h,o as fe,m as Qe,t as Y,F as Ue,Q as J}from"./index.741a3cbc.js";import{Q as ne}from"./TouchPan.72e21371.js";import{j as ze,Q as Z}from"./QSelect.99d80d0f.js";import{h as Ee,u as R}from"./format.b5946461.js";import{Q as Me}from"./QScrollArea.0da9f460.js";import{Q as ie}from"./QForm.972f20fc.js";import{u as ye}from"./use-quasar.088138f3.js";import{Q as be}from"./QSpinnerFacebook.f49bcbaa.js";import"./touch.3df10340.js";import"./axios.851d6ad1.js";import"./QResizeObserver.a9dbfe29.js";import"./QScrollObserver.5b685606.js";function M(t,i,C,n){const l=[];return t.forEach(r=>{n(r)===!0?l.push(r):i.push({failedPropValidation:C,file:r})}),l}function L(t){t&&t.dataTransfer&&(t.dataTransfer.dropEffect="copy"),ve(t)}const Ae={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Oe=["rejected"];function Be({editable:t,dnd:i,getFileInput:C,addFilesToQueue:n}){const{props:l,emit:r,proxy:b}=ge(),x=w(null),P=p(()=>l.accept!==void 0?l.accept.split(",").map(e=>(e=e.trim(),e==="*"?"*/":(e.endsWith("/*")&&(e=e.slice(0,e.length-1)),e.toUpperCase()))):null),F=p(()=>parseInt(l.maxFiles,10)),S=p(()=>parseInt(l.maxTotalSize,10));function N(e){if(t.value)if(e!==Object(e)&&(e={target:null}),e.target!==null&&e.target.matches('input[type="file"]')===!0)e.clientX===0&&e.clientY===0&&he(e);else{const o=C();o&&o!==e.target&&o.click(e)}}function y(e){t.value&&e&&n(null,e)}function g(e,o,d,K){let c=Array.from(o||e.target.files);const D=[],U=()=>{D.length!==0&&r("rejected",D)};if(l.accept!==void 0&&P.value.indexOf("*/")===-1&&(c=M(c,D,"accept",f=>P.value.some(V=>f.type.toUpperCase().startsWith(V)||f.name.toUpperCase().endsWith(V))),c.length===0))return U();if(l.maxFileSize!==void 0){const f=parseInt(l.maxFileSize,10);if(c=M(c,D,"max-file-size",V=>V.size<=f),c.length===0)return U()}if(l.multiple!==!0&&c.length!==0&&(c=[c[0]]),c.forEach(f=>{f.__key=f.webkitRelativePath+f.lastModified+f.name+f.size}),K===!0){const f=d.map(V=>V.__key);c=M(c,D,"duplicate",V=>f.includes(V.__key)===!1)}if(c.length===0)return U();if(l.maxTotalSize!==void 0){let f=K===!0?d.reduce((V,G)=>V+G.size,0):0;if(c=M(c,D,"max-total-size",V=>(f+=V.size,f<=S.value)),c.length===0)return U()}if(typeof l.filter=="function"){const f=l.filter(c);c=M(c,D,"filter",V=>f.includes(V))}if(l.maxFiles!==void 0){let f=K===!0?d.length:0;if(c=M(c,D,"max-files",()=>(f++,f<=F.value)),c.length===0)return U()}if(U(),c.length!==0)return c}function _(e){L(e),i.value!==!0&&(i.value=!0)}function u(e){ve(e),(e.relatedTarget!==null||we.is.safari!==!0?e.relatedTarget!==x.value:document.elementsFromPoint(e.clientX,e.clientY).includes(x.value)===!1)===!0&&(i.value=!1)}function I(e){L(e);const o=e.dataTransfer.files;o.length!==0&&n(null,o),i.value=!1}function v(e){if(i.value===!0)return z("div",{ref:x,class:`q-${e}__dnd absolute-full`,onDragenter:L,onDragover:L,onDragleave:u,onDrop:I})}return Object.assign(b,{pickFiles:N,addFiles:y}),{pickFiles:N,addFiles:y,onDragover:_,onDragleave:u,processFiles:g,getDndNode:v,maxFilesNumber:F,maxTotalSizeNumber:S}}var Ke=xe({name:"QFile",inheritAttrs:!1,props:{...Se,...Ve,...Ae,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Ne,...Oe],setup(t,{slots:i,emit:C,attrs:n}){const{proxy:l}=ge(),r=Fe(),b=w(null),x=w(!1),P=qe(t),{pickFiles:F,onDragover:S,onDragleave:N,processFiles:y,getDndNode:g}=Be({editable:r.editable,dnd:x,getFileInput:ce,addFilesToQueue:pe}),_=De(t),u=p(()=>Object(t.modelValue)===t.modelValue?"length"in t.modelValue?Array.from(t.modelValue):[t.modelValue]:[]),I=p(()=>me(u.value)),v=p(()=>u.value.map(s=>s.name).join(", ")),e=p(()=>Ee(u.value.reduce((s,q)=>s+q.size,0))),o=p(()=>({totalSize:e.value,filesNumber:u.value.length,maxFiles:t.maxFiles})),d=p(()=>({tabindex:-1,type:"file",title:"",accept:t.accept,capture:t.capture,name:P.value,...n,id:r.targetUid.value,disabled:r.editable.value!==!0})),K=p(()=>"q-file q-field--auto-height"+(x.value===!0?" q-file--dnd":"")),c=p(()=>t.multiple===!0&&t.append===!0);function D(s){const q=u.value.slice();q.splice(s,1),f(q)}function U(s){const q=u.value.indexOf(s);q>-1&&D(q)}function f(s){C("update:modelValue",t.multiple===!0?s:s[0])}function V(s){s.keyCode===13&&$e(s)}function G(s){(s.keyCode===13||s.keyCode===32)&&F(s)}function ce(){return b.value}function pe(s,q){const k=y(s,q,u.value,c.value),X=ce();X!=null&&(X.value=""),k!==void 0&&((t.multiple===!0?t.modelValue&&k.every(_e=>u.value.includes(_e)):t.modelValue===k[0])||f(c.value===!0?u.value.concat(k):k))}function T(){return[z("input",{class:[t.inputClass,"q-file__filler"],style:t.inputStyle})]}function Ce(){if(i.file!==void 0)return u.value.length===0?T():u.value.map((q,k)=>i.file({index:k,file:q,ref:this}));if(i.selected!==void 0)return u.value.length===0?T():i.selected({files:u.value,ref:this});if(t.useChips===!0)return u.value.length===0?T():u.value.map((q,k)=>z(ze,{key:"file-"+k,removable:r.editable.value,dense:!0,textColor:t.color,tabindex:t.tabindex,onRemove:()=>{D(k)}},()=>z("span",{class:"ellipsis",textContent:q.name})));const s=t.displayValue!==void 0?t.displayValue:v.value;return s.length!==0?[z("div",{class:t.inputClass,style:t.inputStyle,textContent:s})]:T()}function Pe(){const s={ref:b,...d.value,..._.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:pe};return t.multiple===!0&&(s.multiple=!0),z("input",s)}return Object.assign(r,{fieldClass:K,emitValue:f,hasValue:I,inputRef:b,innerValue:u,floatingLabel:p(()=>I.value===!0||me(t.displayValue)),computedCounter:p(()=>{if(t.counterLabel!==void 0)return t.counterLabel(o.value);const s=t.maxFiles;return`${u.value.length}${s!==void 0?" / "+s:""} (${e.value})`}),getControlChild:()=>g("file"),getControl:()=>{const s={ref:r.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:t.tabindex};return r.editable.value===!0&&Object.assign(s,{onDragover:S,onDragleave:N,onKeydown:V,onKeyup:G}),z("div",s,[Pe()].concat(Ce()))}}),Object.assign(l,{removeAtIndex:D,removeFile:U,getNativeElement:()=>b.value}),Ie(l,"nativeEl",()=>b.value),ke(r)}});const B=t=>(re("data-v-1b3413e5"),t=t(),se(),t),Te=B(()=>h("div",{class:"text-h6 text-bold",style:{color:"#123499"}}," Create New Product ",-1)),Le=B(()=>h("div",{class:"text-bold"},"Product Name",-1)),Re=B(()=>h("div",{class:"text-bold"},"Description",-1)),We=B(()=>h("div",{class:"text-bold"},"Product Category",-1)),Ge=B(()=>h("div",{class:"text-bold q-mt-lg"},"Product Sub Category",-1)),Xe=B(()=>h("div",{class:"text-bold q-mt-lg"},"Product Images",-1)),Ye={__name:"createNewProductModal",props:{showNewProductPopup:{type:Boolean,required:!0,default:!1},closeNewProductPopup:{type:Function,required:!0}},setup(t){const i=t,C=R(),n=w(""),l=w(""),r=w(""),b=w(""),x=w([]),P=w(null);w([]);const{productCategories:F}=ee(C),S=p({get:()=>i.showNewProductPopup,set:()=>i.closeNewProductPopup()}),N=p(()=>{var e;let v=(e=F.value)==null?void 0:e.map(o=>o.name);return r.value=v&&v[0],v}),y=p(()=>{let v=_(n.value),e=_(l.value),o=P.value&&P.value.length;return!v||!e||!o}),g=v=>{i.closeNewProductPopup(v)},_=v=>v.trim().length>2,u=v=>{var o;let e=(o=F.value)==null?void 0:o.find(d=>d.name===v);b.value=e.sub_categories[0].name,x.value=e.sub_categories.map(d=>d.name)},I=()=>{console.log("productImages.value",P.value),P.value;let v=new FormData;v.append("file_name",P.value[0]),v.append("file_name",P.value[1]),C.createProductImageUrls(v).then(e=>{console.log("res",e)}).catch(e=>{console.log("err",e)})};return je(r,v=>{u(v)}),(v,e)=>(E(),A(ue,{modelValue:$(S),"onUpdate:modelValue":e[5]||(e[5]=o=>ae(S)?S.value=o:null),persistent:"",onKeydown:le(g,["esc"])},{default:m(()=>[a(oe,{class:"product-modal"},{default:m(()=>[a(j,{class:"row items-center"},{default:m(()=>[Te,a(ne),a(Q,{icon:"close",flat:"",round:"",onClick:g})]),_:1}),a(ie,{onSubmit:I},{default:m(()=>[a(Me,{style:{height:"calc(70vh - 170px)"}},{default:m(()=>[a(j,null,{default:m(()=>[Le,a(O,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),style:{"max-width":"400px"},outlined:"",dense:"",autofocus:"",placeholder:"Enter a Product name",maxlength:"64",rules:[o=>_(o)||"Field is required!!!"]},null,8,["modelValue","rules"]),Re,a(O,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value=o),type:"textarea",style:{width:"400px"},outlined:"",dense:"",autofocus:"",rows:"2",placeholder:"Enter Product Description","input-class":"textarea-input",rules:[o=>_(o)||"Field is required!!!"]},null,8,["modelValue","rules"]),We,a(Z,{style:{width:"400px"},filled:"",modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=o=>r.value=o),options:$(N)},null,8,["modelValue","options"]),Ge,a(Z,{style:{width:"400px"},filled:"",modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=o=>b.value=o),options:x.value},null,8,["modelValue","options"]),Xe,a(Ke,{modelValue:P.value,"onUpdate:modelValue":e[4]||(e[4]=o=>P.value=o),label:"Add Images",filled:"",multiple:"",append:"",accept:".jpg,.jpeg,.png",style:{width:"400px"}},null,8,["modelValue"])]),_:1})]),_:1}),a(j,{class:"row justify-end"},{default:m(()=>[a(te,{class:"q-px-none"},{default:m(()=>[a(Q,{unelevated:"",color:"primary",label:"Save",disable:$(y),type:"submit","no-caps":""},null,8,["disable"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onKeydown"]))}};var Je=H(Ye,[["__scopeId","data-v-1b3413e5"]]);const de=t=>(re("data-v-1bb4ca27"),t=t(),se(),t),Ze=de(()=>h("div",{class:"text-h6 text-bold",style:{color:"#123499"}}," Create New Product Category ",-1)),He=de(()=>h("div",{class:"text-bold"},"Name",-1)),et=de(()=>h("div",{class:"text-bold"},"Description",-1)),tt={__name:"createNewProductCategoryModal",props:{showNewProductCategoryPopup:{type:Boolean,required:!0,default:!1},closeNewProductCategoryPopup:{type:Function,required:!0}},setup(t){const i=t,C=R(),n=w(""),l=w(""),r=ye(),b=p({get:()=>i.showNewProductCategoryPopup,set:()=>i.closeNewProductCategoryPopup()}),x=p(()=>{let g=N(n.value),_=N(l.value);return!g||!_}),P=()=>{r.loading.show({spinner:be,spinnerColor:"light-blue",messageColor:"white",backgroundColor:"light-blue",message:""})},F=()=>{r.loading.hide()},S=()=>{i.closeNewProductCategoryPopup()},N=g=>g.trim().length>2,y=()=>{P();let g={name:n.value,description:l.value};C.createProductCategory(g).then(_=>{r.notify({message:"Product Category Created Successfully!!!",type:"positive",position:"top"}),S()}).catch(_=>{r.notify({message:"Error in updating Product Category. Please contact your admin!!!",type:"negative",position:"top"})}).finally(()=>{F()})};return(g,_)=>(E(),A(ue,{modelValue:$(b),"onUpdate:modelValue":_[2]||(_[2]=u=>ae(b)?b.value=u:null),persistent:"",onKeydown:le(S,["esc"])},{default:m(()=>[a(oe,{class:"product-category-modal"},{default:m(()=>[a(j,{class:"row items-center"},{default:m(()=>[Ze,a(ne),a(Q,{icon:"close",flat:"",round:"",onClick:S})]),_:1}),a(ie,{onSubmit:y},{default:m(()=>[a(j,null,{default:m(()=>[He,a(O,{modelValue:n.value,"onUpdate:modelValue":_[0]||(_[0]=u=>n.value=u),style:{"max-width":"400px"},outlined:"",dense:"",autofocus:"",placeholder:"Enter a Product Catgeoty name",maxlength:"64",rules:[u=>N(u)||"Field is required!!!"]},null,8,["modelValue","rules"]),et,a(O,{modelValue:l.value,"onUpdate:modelValue":_[1]||(_[1]=u=>l.value=u),type:"textarea",style:{width:"400px"},outlined:"",dense:"",autofocus:"",rows:"3",placeholder:"Enter a Product Category Description","input-class":"textarea-input",rules:[u=>N(u)||"Field is required!!!"]},null,8,["modelValue","rules"])]),_:1}),a(j,{class:"row justify-end"},{default:m(()=>[a(te,{class:"q-px-none"},{default:m(()=>[a(Q,{unelevated:"",color:"primary",label:"Save",disable:$(x),type:"submit","no-caps":""},null,8,["disable"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onKeydown"]))}};var ot=H(tt,[["__scopeId","data-v-1bb4ca27"]]);const W=t=>(re("data-v-fdb4d538"),t=t(),se(),t),at=W(()=>h("div",{class:"text-h6 text-bold",style:{color:"#123499"}}," Create New Product Sub Category ",-1)),lt=W(()=>h("div",{class:"text-bold"},"Name",-1)),ut=W(()=>h("div",{class:"text-bold"},"Description",-1)),rt=W(()=>h("div",{class:"text-bold"},"Product Category",-1)),st={__name:"createNewProductSubCategoryModal",props:{showNewProductSubCategoryPopup:{type:Boolean,required:!0,default:!1},closeNewProductSubCategoryPopup:{type:Function,required:!0}},setup(t){const i=t,C=R(),n=w(""),l=w(""),r=w(""),b=ye(),{productCategories:x}=ee(C),P=p({get:()=>i.showNewProductSubCategoryPopup,set:()=>i.closeNewProductSubCategoryPopup()}),F=p(()=>{var o;let e=(o=x.value)==null?void 0:o.map(d=>d.name);return n.value=e&&e[0],e}),S=p(()=>{var o;return((o=x.value)==null?void 0:o.find(d=>d.name===n.value)).id}),N=p(()=>{var o;return((o=x.value)==null?void 0:o.find(d=>d.name===n.value)).uid}),y=p(()=>{let e=I(r.value),o=I(l.value);return!e||!o}),g=()=>{b.loading.show({spinner:be,spinnerColor:"light-blue",messageColor:"white",backgroundColor:"light-blue",message:""})},_=()=>{b.loading.hide()},u=()=>{i.closeNewProductSubCategoryPopup()},I=e=>e.trim().length>2,v=()=>{g();let e={name:r.value,description:l.value,category:S.value};console.log("payload",e),C.createProductSubCategory(e,N.value).then(o=>{b.notify({message:"Product Sub Category Created Successfully!!!",type:"positive",position:"top"}),u()}).catch(o=>{b.notify({message:"Error in updating Product Sub Category. Please contact your admin!!!",type:"negative",position:"top"})}).finally(()=>{_()})};return fe(()=>{C.getProductCategories()}),(e,o)=>(E(),A(ue,{modelValue:$(P),"onUpdate:modelValue":o[3]||(o[3]=d=>ae(P)?P.value=d:null),persistent:"",onKeydown:le(u,["esc"])},{default:m(()=>[a(oe,{class:"product-sub-category-modal"},{default:m(()=>[a(j,{class:"row items-center"},{default:m(()=>[at,a(ne),a(Q,{icon:"close",flat:"",round:"",onClick:u})]),_:1}),a(ie,{onSubmit:v},{default:m(()=>[a(j,null,{default:m(()=>[lt,a(O,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=d=>r.value=d),style:{"max-width":"400px"},outlined:"",dense:"",autofocus:"",placeholder:"Enter a Product Sub Catgeoty name",maxlength:"64",rules:[d=>I(d)||"Field is required!!!"]},null,8,["modelValue","rules"]),ut,a(O,{modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=d=>l.value=d),type:"textarea",style:{width:"400px"},outlined:"",dense:"",autofocus:"",rows:"3",placeholder:"Enter a Product Category Description","input-class":"textarea-input",rules:[d=>I(d)||"Field is required!!!"]},null,8,["modelValue","rules"]),rt,a(Z,{style:{width:"400px"},filled:"",modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=d=>n.value=d),options:$(F)},null,8,["modelValue","options"])]),_:1}),a(j,{class:"row justify-end"},{default:m(()=>[a(te,{class:"q-px-none"},{default:m(()=>[a(Q,{unelevated:"",color:"primary",label:"Save",disable:$(y),type:"submit","no-caps":""},null,8,["disable"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onKeydown"]))}};var nt=H(st,[["__scopeId","data-v-fdb4d538"]]);const it={class:"q-px-md q-pt-md q-pb-xs float-right"},dt={class:"row justify-start items-center"},ct=h("span",{class:"q-ml-sm"},"New Category",-1),pt={class:"row justify-start items-center"},mt=h("span",{class:"q-ml-sm"},"New Sub Category",-1),gt={class:"row justify-start items-center"},vt=h("span",{class:"q-ml-sm"},"New Product",-1),Ft={__name:"ProductsPage",setup(t){const i=R(),C=w(!1),n=w(!1),l=w(!1),{productCategories:r}=ee(i),b=p(()=>r.value&&r.value.length),x=p(()=>r.value&&r.value.length&&r.value[0].sub_categories.length),P=N=>{C.value=!1},F=()=>{n.value=!1},S=()=>{l.value=!1};return fe(()=>{i.getProductCategories()}),(N,y)=>(E(),Qe(Ue,null,[h("div",it,[a(Q,{color:"primary",class:"q-mb-md q-mr-sm","no-caps":"",onClick:y[0]||(y[0]=g=>n.value=!0)},{default:m(()=>[h("div",dt,[a(J,{name:"add"}),ct])]),_:1}),a(Q,{color:"primary",class:"q-mb-md q-mr-sm","no-caps":"",disable:!$(b),onClick:y[1]||(y[1]=g=>l.value=!0)},{default:m(()=>[h("div",pt,[a(J,{name:"add"}),mt])]),_:1},8,["disable"]),a(Q,{color:"primary",class:"q-mb-md","no-caps":"",disable:!$(x),onClick:y[2]||(y[2]=g=>C.value=!0)},{default:m(()=>[h("div",gt,[a(J,{name:"add"}),vt])]),_:1},8,["disable"])]),C.value?(E(),A(Je,{key:0,modelValue:C.value,"onUpdate:modelValue":y[3]||(y[3]=g=>C.value=g),"show-new-product-popup":C.value,"close-new-product-popup":P},null,8,["modelValue","show-new-product-popup"])):Y("",!0),n.value?(E(),A(ot,{key:1,modelValue:n.value,"onUpdate:modelValue":y[4]||(y[4]=g=>n.value=g),"show-new-product-category-popup":n.value,"close-new-product-category-popup":F},null,8,["modelValue","show-new-product-category-popup"])):Y("",!0),l.value?(E(),A(nt,{key:2,modelValue:l.value,"onUpdate:modelValue":y[5]||(y[5]=g=>l.value=g),"show-new-product-sub-category-popup":l.value,"close-new-product-sub-category-popup":S},null,8,["modelValue","show-new-product-sub-category-popup"])):Y("",!0)],64))}};export{Ft as default};
