import{c as d,B as F,r as m,w as R,H as M,h as c,N as U,E as Z,b8 as ie,R as ae,aP as le,S as oe,ax as re,$ as se,aQ as ue,V as ce,aR as de,ap as Q,ak as $,ad as ge,g as fe,Z as ve,l as me,v as he,n as ye,q as Se}from"./index.84e406f6.js";import{u as Te,v as A,a as be,p as W,b as we,c as _e,d as I,s as Ce,e as Pe}from"./QSelect.c660601d.js";import{d as V}from"./format.caa0d1be.js";const ke={ratio:[String,Number]};function qe(e,o){return d(()=>{const r=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(r)!==!0&&r>0?{paddingBottom:`${100/r}%`}:null})}const Oe=16/9;var Be=F({name:"QImg",props:{...ke,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Oe},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:r}){const h=m(e.initialRatio),g=qe(e,h);let n=null,f=!1;const i=[m(null),m(_())],a=m(0),u=m(!1),y=m(!1),x=d(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),E=d(()=>({width:e.width,height:e.height})),H=d(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),N=d(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));R(()=>S(),P);function S(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function _(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function P(t){n!==null&&(clearTimeout(n),n=null),y.value=!1,t===null?(u.value=!1,i[a.value^1].value=_()):u.value=!0,i[a.value].value=t}function k({target:t}){f!==!0&&(n!==null&&(clearTimeout(n),n=null),h.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,q(t,1))}function q(t,v){f===!0||v===1e3||(t.complete===!0?p(t):n=setTimeout(()=>{n=null,q(t,v+1)},50))}function p(t){f!==!0&&(a.value=a.value^1,i[a.value].value=null,u.value=!1,y.value=!1,r("load",t.currentSrc||t.src))}function s(t){n!==null&&(clearTimeout(n),n=null),u.value=!1,y.value=!0,i[a.value].value=null,i[a.value^1].value=_(),r("error",t)}function O(t){const v=i[t].value,b={key:"img_"+t,class:H.value,style:N.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...v};return a.value===t?(b.class+=" q-img__image--waiting",Object.assign(b,{onLoad:k,onError:s})):b.class+=" q-img__image--loaded",c("div",{class:"q-img__container absolute-full",key:"img"+t},c("img",b))}function T(){return u.value!==!0?c("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Z(o[y.value===!0?"error":"default"])):c("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[c(ie,{color:e.spinnerColor,size:e.spinnerSize})])}return P(S()),M(()=>{f=!0,n!==null&&(clearTimeout(n),n=null)}),()=>{const t=[];return g.value!==null&&t.push(c("div",{key:"filler",style:g.value})),y.value!==!0&&(i[0].value!==null&&t.push(O(0)),i[1].value!==null&&t.push(O(1))),t.push(c(U,{name:"q-transition--fade"},T)),c("div",{class:x.value,style:E.value,role:"img","aria-label":e.alt},t)}}}),xe=F({name:"QTooltip",inheritAttrs:!1,props:{...Te,...ae,...le,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:A},self:{type:String,default:"top middle",validator:A},offset:{type:Array,default:()=>[14,14],validator:be},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...oe],setup(e,{slots:o,emit:r,attrs:h}){let g,n;const f=fe(),{proxy:{$q:i}}=f,a=m(null),u=m(!1),y=d(()=>W(e.anchor,i.lang.rtl)),x=d(()=>W(e.self,i.lang.rtl)),E=d(()=>e.persistent!==!0),{registerTick:H,removeTick:N}=re(),{registerTimeout:S}=se(),{transitionProps:_,transitionStyle:P}=ue(e),{localScrollTarget:k,changeScrollEvent:q,unconfigureScrollTarget:p}=we(e,L),{anchorEl:s,canShow:O,anchorEvents:T}=_e({showing:u,configureAnchorEl:ee}),{show:t,hide:v}=ce({showing:u,canShow:O,handleShow:J,handleHide:K,hideOnRouteChange:E,processOnMount:!0});Object.assign(T,{delayShow:X,delayHide:Y});const{showPortal:b,hidePortal:j,renderPortal:G}=de(f,a,ne,"tooltip");if(i.platform.is.mobile===!0){const l={anchorEl:s,innerRef:a,onClickOutside(w){return v(w),w.target.classList.contains("q-dialog__backdrop")&&ve(w),!0}},B=d(()=>e.modelValue===null&&e.persistent!==!0&&u.value===!0);R(B,w=>{(w===!0?Pe:I)(l)}),M(()=>{I(l)})}function J(l){b(),H(()=>{n=new MutationObserver(()=>C()),n.observe(a.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),C(),L()}),g===void 0&&(g=R(()=>i.screen.width+"|"+i.screen.height+"|"+e.self+"|"+e.anchor+"|"+i.lang.rtl,C)),S(()=>{b(!0),r("show",l)},e.transitionDuration)}function K(l){N(),j(),z(),S(()=>{j(!0),r("hide",l)},e.transitionDuration)}function z(){n!==void 0&&(n.disconnect(),n=void 0),g!==void 0&&(g(),g=void 0),p(),Q(T,"tooltipTemp")}function C(){Ce({targetEl:a.value,offset:e.offset,anchorEl:s.value,anchorOrigin:y.value,selfOrigin:x.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function X(l){if(i.platform.is.mobile===!0){V(),document.body.classList.add("non-selectable");const B=s.value,w=["touchmove","touchcancel","touchend","click"].map(D=>[B,D,"delayHide","passiveCapture"]);$(T,"tooltipTemp",w)}S(()=>{t(l)},e.delay)}function Y(l){i.platform.is.mobile===!0&&(Q(T,"tooltipTemp"),V(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),S(()=>{v(l)},e.hideDelay)}function ee(){if(e.noParentEvent===!0||s.value===null)return;const l=i.platform.is.mobile===!0?[[s.value,"touchstart","delayShow","passive"]]:[[s.value,"mouseenter","delayShow","passive"],[s.value,"mouseleave","delayHide","passive"]];$(T,"anchor",l)}function L(){if(s.value!==null||e.scrollTarget!==void 0){k.value=ge(s.value,e.scrollTarget);const l=e.noParentEvent===!0?C:v;q(k.value,l)}}function te(){return u.value===!0?c("div",{...h,ref:a,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",h.class],style:[h.style,P.value],role:"tooltip"},Z(o.default)):null}function ne(){return c(U,_.value,te)}return M(z),Object.assign(f.proxy,{updatePosition:C}),G}});const Ee=["innerHTML"],Re={__name:"CustomTooltip",props:{content:{type:String,required:!0},maxWidth:{type:String,default:"14rem"}},setup(e){const o=e;return(r,h)=>(me(),he(xe,{class:"bg-cyan-10 q-pa-md",outlined:"",delay:r.$tooltipDelay,anchor:"center right",self:"center left",offset:[10,10],"max-width":o.maxWidth},{default:ye(()=>[Se("div",{innerHTML:o.content},null,8,Ee)]),_:1},8,["delay","max-width"]))}};export{Be as Q,Re as _};
