import{B as P,i as Q,G as d,c as b,h as S,E as L,g as q,J as F,a6 as V,_ as k,bx as I,r as w,l as B,v as $,n as s,d as t,aA as z,z as U,M as A,aB as h,by as H,aG as x,q as g,A as j,aD as E,aE as G}from"./index.84e406f6.js";import{Q as K}from"./QForm.48a1f013.js";import{Q as M,a as N}from"./QLayout.b18cf989.js";import{u as W}from"./use-quasar.eb8135c3.js";import{Q as D}from"./QSpinnerFacebook.317364b6.js";import{u as J}from"./axios.95677817.js";import"./QScrollObserver.3e0dacf6.js";import"./QResizeObserver.d83a6f29.js";var O=P({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(l,{slots:m}){const{proxy:{$q:r}}=q(),a=Q(F,d);if(a===d)return console.error("QPage needs to be a deep child of QLayout"),d;if(Q(V,d)===d)return console.error("QPage needs to be child of QPageContainer"),d;const u=b(()=>{const i=(a.header.space===!0?a.header.size:0)+(a.footer.space===!0?a.footer.size:0);if(typeof l.styleFn=="function"){const _=a.isContainer.value===!0?a.containerHeight.value:r.screen.height;return l.styleFn(i,_)}return{minHeight:a.isContainer.value===!0?a.containerHeight.value-i+"px":r.screen.height===0?i!==0?`calc(100vh - ${i}px)`:"100vh":r.screen.height-i+"px"}}),f=b(()=>`q-page${l.padding===!0?" q-layout-padding":""}`);return()=>S("main",{class:f.value,style:u.value},L(m.default))}});const C=l=>(E("data-v-de9c7018"),l=l(),G(),l),T=C(()=>g("img",{src:"company_logo_V2.png",alt:""},null,-1)),X=C(()=>g("div",{class:"text-center q-pt-lg"},[g("div",{class:"col text-h6 ellipsis"},"Log in")],-1)),Y={class:"row justify-center"},Z={__name:"LoginPage",setup(l){const m=I(),r=J(),a=w(""),p=w(""),u=W(),f=()=>{u.loading.show({spinner:D,spinnerColor:"light-blue",messageColor:"white",backgroundColor:"light-blue",message:""})},i=()=>{u.loading.hide()},_=()=>{f();let y={email:a.value,password:p.value,accessed_from:"web"};r.userLoginWithPassword(y).then(n=>{let e=n.data.token;r.token=e,localStorage.setItem("token",e),r.getUserInfo(),m.push({name:"main"})}).catch(n=>{var v;let e=null,c=null,o=(v=n.response)==null?void 0:v.data;o!=null&&o.non_field_errors?(e=o.non_field_errors,c=e[0]):o!=null&&o.email?(e=o.email,c=e[0]):o||(c="Something went Wrong. Please contact your admin!!!"),c&&u.notify({message:c,type:"negative",position:"top"})}).finally(()=>{i()})};return(y,n)=>(B(),$(M,null,{default:s(()=>[t(N,null,{default:s(()=>[t(O,{class:"flex bg-image flex-center"},{default:s(()=>[t(z,{style:U(A(u).screen.lt.sm?{width:"80%"}:{width:"30%"})},{default:s(()=>[t(h,null,{default:s(()=>[t(H,{size:"103px",class:"absolute-center shadow-10"},{default:s(()=>[T]),_:1})]),_:1}),t(h,null,{default:s(()=>[X]),_:1}),t(h,null,{default:s(()=>[t(K,{class:"q-gutter-md",onSubmit:_},{default:s(()=>[t(x,{autofocus:"",outlined:"",modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),"bg-color":"grey-3",label:"email",type:"email",rules:[e=>!!e||"Field is required"],"no-error-icon":""},null,8,["modelValue","rules"]),t(x,{type:"password",outlined:"",modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=e=>p.value=e),"bg-color":"grey-3",label:"Password",rules:[e=>!!e||"Field is required"],"no-error-icon":""},null,8,["modelValue","rules"]),g("div",Y,[t(j,{label:"Login",type:"submit",color:"primary"})])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1}))}};var re=k(Z,[["__scopeId","data-v-de9c7018"]]);export{re as default};
